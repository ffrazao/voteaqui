<div *ngIf="entidade">

  <h3 class="text-info mt-4">Segue o resultado da votação. As opções de cada pauta estão ordenadas do mais para o menos
    votado</h3>

  <h1><b><u>{{entidade.resultado.nome}}</u></b></h1>

  <div [innerHTML]="entidade.resultado.descricao"></div>

  <!-- <h2>{{entidade.resultado.descricao}}</h2> -->

  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead class="thead-dark">
        <tr>
          <th colspan="3">Total de Participantes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>Geral</th>
          <td>{{entidade.participantes}}</td>
          <td>100%</td>
        </tr>
        <tr>
          <th>Votantes</th>
          <td>{{entidade.votantes}}</td>
          <td>{{(entidade.votantes / entidade.participantes) * 100 | number}}%</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead class="thead-dark">
        <tr>
          <th colspan="2">Período da Votação</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>Início</th>
          <td>{{entidade.resultado.inicio | date: 'long' : 'pt-BR'}}</td>
        </tr>
        <tr>
          <th>Término</th>
          <td>{{entidade.resultado.termino | date: 'long' : 'pt-BR'}}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <ng-template ngFor let-pauta [ngForOf]="entidade.resultado.pautaLista" let-i="index">
        <thead class="thead-dark">
          <tr>
            <th><b>{{i+1}}.</b></th>
            <th><b>{{pauta.nome}}</b></th>
            <th colspan="2">
              <!-- {{pauta.descricao}} -->
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let opcao of pauta.opcaoLista; let j = index"
            [class]="opcao.voto === 'S'? 'table-success' : opcao.voto === 'N' ? 'table-danger': ''">
            <td>{{i+1}}.{{j+1}}.</td>
            <td>{{opcao.nome}}</td>
            <td>
              <div [innerHTML]="opcao.descricao"></div>
              <!-- <pre>{{opcao.descricao}}</pre> -->
            </td>
            <td>
              <div class="table-responsive">
                <table class="table table-striped table-hover">
                  <thead class="thead-dark">
                    <tr>
                      <th>Valor</th>
                      <th>Quantidade</th>
                      <th>Geral %</th>
                      <th>Votantes %</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="table-success">
                      <th>Sim</th>
                      <td>{{opcao.valor.S}}</td>
                      <td>{{(opcao.valor.S / entidade.participantes) * 100 | number}} %</td>
                      <td>{{(opcao.valor.S / entidade.votantes) * 100 | number}} %</td>
                    </tr>
                    <tr class="">
                      <th>Em Branco</th>
                      <td>{{opcao.valor.branco}}</td>
                      <td>{{(opcao.valor.branco / entidade.participantes) * 100 | number}} %</td>
                      <td>{{(opcao.valor.branco / entidade.votantes) * 100 | number}} %</td>
                    </tr>
                    <tr class="table-danger">
                      <th>Não</th>
                      <td>{{opcao.valor.N}}</td>
                      <td>{{(opcao.valor.N / entidade.participantes) * 100 | number}} %</td>
                      <td>{{(opcao.valor.N / entidade.votantes) * 100 | number}} %</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        </tbody>
      </ng-template>
    </table>
  </div>
</div>
